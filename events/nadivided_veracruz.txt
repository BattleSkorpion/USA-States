add_namespace = veracruz

country_event = { #Begin the drafting of a deal to work with the Haciendas, event for MAC
    id = veracruz.1
    title = veracruz.1.t
    desc = veracruz.1.desc
    # picture = 

    is_triggered_only = yes
    fire_only_once = yes

    option = { #Let us see where this deal goes
        name = veracruz.1.a
        ai_chance = {
            factor = 75
            modifier = {
                add = -75
                AND = {
                    strength_ratio = {
                        tag = MEX
                        ratio > 1.2
                    }
                    strength_ratio = {
                        tag = MCL
                        ratio > 1.2
                    }
                }
            }
            modifier = {
                add = 25
                AND = {
                    strength_ratio = {
                        tag = MEX
                        ratio < 0.8
                    }
                    strength_ratio = {
                        tag = MCL
                        ratio < 0.8
                    }
                }
            }
            modifier = {
                add = 25
                has_opinion = {
                    target = MVE
                    opinion > 50
                }
            }
        }
        hidden_effect = {
            MVE = {
                country_event = {
                    id = veracruz.2
                }
            }
        }
    }
    option = { #reject the proposition right now, no deal needed
        name = veracruz.1.b
        ai_chance = {
            factor = 25
            modifier = {
                add = 75
                AND = {
                    strength_ratio = {
                        tag = MEX
                        ratio > 1.2
                    }
                    strength_ratio = {
                        tag = MCL
                        ratio > 1.2
                    }
                }
            }
            modifier = {
                add = -25
                AND = {
                    strength_ratio = {
                        tag = MEX
                        ratio < 0.8
                    }
                    strength_ratio = {
                        tag = MCL
                        ratio < 0.8
                    }
                }
            }
            modifier = {
                add = -25
                has_opinion = {
                    target = MVE
                    opinion > 50
                }
            }
        }
        add_political_power = -10
        hidden_effect = {
            MVE = {
                country_event = {
                    id = veracruz.3
                }
            }
        }
    }
}
country_event = { #Ambiguous accepts, let's begin drafting the proposal
    id = veracruz.2
    title = veracruz.2.t
    desc = veracruz.2.desc
    # picture = 

    is_triggered_only = yes
    fire_only_once = yes

    option = { #Great
        name = veracruz.2.a
        hidden_effect = {
            set_country_flag = MVE_drafting_the_deal
        }
    }
}
country_event = { #MAC declines, we need another option
    id = veracruz.3
    title = veracruz.3.t
    desc = veracruz.3.desc
    # picture = 

    is_triggered_only = yes
    fire_only_once = yes

    # option = { #Maybe we should strike a deal with The Catholics
    #     trigger = {
    #         country_exists = MCL
    #         MCL = {
    #             has_war_with = MAC
    #             has_war_with = MEX
    #         }
    #         NOT = {
    #             has_country_flag = MVE_tried_to_work_with_MCL
    #         }
    #     }
    #     name = veracruz.3.a
    #     ai_chance = {
    #         factor = 50
    #     }
    #     MCL = {
    #         country_event = {
    #             id = veracruz.4
    #         }
    #     }
    # }
    # option = { #Maybe we should strike a deal with The Federal Government
    #     trigger = {
    #         country_exists = MEX
    #         MEX = {
    #             has_war_with = MAC
    #             has_war_with = MCL
    #         }
    #         NOT = {
    #             has_country_flag = MVE_tried_to_work_with_MEX
    #         }
    #     }
    #     name = veracruz.3.b
    #     ai_chance = {
    #         factor = 10
    #     }
    #     MEX = {
    #         country_event = id = veracruz.5
    #     }
    # }
    option = { #They better have room in that Civil War for one more Participant!
        name = veracruz.3.c
        ai_chance = {
            factor = 40
        }
        complete_national_focus = MVE_take_advantage_of_the_chaos
    }
}
# country_event = { #Begin the drafting of a deal to work with the State of God, event for MCL
#     id = veracruz.4
#     title = veracruz.1.t
#     desc = veracruz.4.desc
#     # picture = 

#     is_triggered_only = no
#     fire_only_once = yes

#     option = { #Let us see where this deal goes
#         name = veracruz.1.a
#         ai_chance = {
#             factor = 75
#             modifier = {
#                 add = -75
#                 AND = {
#                     strength_ratio = {
#                         tag = MEX
#                         ratio > 1.2
#                     }
#                     strength_ratio = {
#                         tag = MAC
#                         ratio > 1.2
#                     }
#                 }
#             }
#             modifier = {
#                 add = 25
#                 AND = {
#                     strength_ratio = {
#                         tag = MEX
#                         ratio < 0.8
#                     }
#                     strength_ratio = {
#                         tag = MAC
#                         ratio < 0.8
#                     }
#                 }
#             }
#         }
#         hidden_effect = {
#             MVE = {
#                 country_event = {
#                     id = veracruz.2
#                 }
#             }
#         }
#     }
#     option = { #reject the proposition right now, no deal needed
#         name = veracruz.1.b
#         ai_chance = {
#             factor = 25
#             modifier = {
#                 add = 75
#                 AND = {
#                     strength_ratio = {
#                         tag = MEX
#                         ratio > 1.2
#                     }
#                     strength_ratio = {
#                         tag = MAC
#                         ratio > 1.2
#                     }
#                 }
#             }
#             modifier = {
#                 add = -25
#                 AND = {
#                     strength_ratio = {
#                         tag = MEX
#                         ratio < 0.8
#                     }
#                     strength_ratio = {
#                         tag = MAC
#                         ratio < 0.8
#                     }
#                 }
#             }
#         }
#         add_political_power = -10
#         hidden_effect = {
#             MVE = {
#                 set_country_flag = MVE_tried_to_work_with_MCL
#                 country_event = {
#                     id = veracruz.3
#                 }
#             }
#         }
#     }
# }
# country_event = { #Begin the drafting of a deal to work Nacion Federal, event for MEX
#     id = veracruz.5
#     title = veracruz.1.t
#     desc = veracruz.5.desc
#     # picture = 

#     is_triggered_only = no
#     fire_only_once = yes

#     option = { #Let us see where this deal goes
#         name = veracruz.1.a
#         ai_chance = {
#             factor = 25
#             modifier = {
#                 add = -25
#                 AND = {
#                     strength_ratio = {
#                         tag = MCL
#                         ratio > 1.2
#                     }
#                     strength_ratio = {
#                         tag = MAC
#                         ratio > 1.2
#                     }
#                 }
#             }
#             modifier = {
#                 add = 25
#                 AND = {
#                     strength_ratio = {
#                         tag = MCL
#                         ratio < 0.8
#                     }
#                     strength_ratio = {
#                         tag = MAC
#                         ratio < 0.8
#                     }
#                 }
#             }
#         }
#         hidden_effect = {
#             MVE = {
#                 country_event = {
#                     id = veracruz.2
#                 }
#             }
#         }
#     }
#     option = { #reject the proposition right now, no deal needed
#         name = veracruz.1.b
#         ai_chance = {
#             factor = 75
#             modifier = {
#                 add = 25
#                 AND = {
#                     strength_ratio = {
#                         tag = MCL
#                         ratio > 1.2
#                     }
#                     strength_ratio = {
#                         tag = MAC
#                         ratio > 1.2
#                     }
#                 }
#             }
#             modifier = {
#                 add = -25
#                 AND = {
#                     strength_ratio = {
#                         tag = MCL
#                         ratio < 0.8
#                     }
#                     strength_ratio = {
#                         tag = MAC
#                         ratio < 0.8
#                     }
#                 }
#             }
#         }
#         add_political_power = -10
#         hidden_effect = {
#             MVE = {
#                 set_country_flag = MVE_tried_to_work_with_MEX
#                 country_event = {
#                     id = veracruz.3
#                 }
#             }
#         }
#     }
# }
country_event = { #How much land should we Demand?
    id = veracruz.6
    title = veracruz.6.t
    desc = veracruz.6.desc
    # picture = 

    is_triggered_only = yes
    fire_only_once = yes

    option = { #A little (State 475)
        name = veracruz.6.a
        ai_chance = {
            factor = 5
            modifier = {
                factor = 0
                has_country_flag = MVE_join_war_deal
            }
            modifier = {
                factor = 2
                has_country_flag = MVE_gun_aid_deal
            }
        }
        custom_effect_tooltip = MVE_demand_475_tt
        hidden_effect = {
            set_country_flag = MVE_demanded_475
        }
    }
    option = { #A Reasonable Amount (State 475 and 691)
        ai_chance = {
            factor = 65
        }
        custom_effect_tooltip = MVE_demand_475_and_691_tt
        hidden_effect = {
            set_country_flag = MVE_demanded_475_and_691
        }
    }
    option = { #Demand Everythilng (All Veracruz core states)
        ai_chance = {
            factor = 30
            modifier = {
                factor = 2
                has_country_flag = MVE_join_war_deal
            }
            modifier = {
                add = -20
                has_country_flag = MVE_gun_aid_deal
            }
        }
        custom_effect_tooltip = MVE_demand_everything
        hidden_effect = {
            set_country_flag = MVE_demanded_everything
        }
    }
}
country_event = { #What should their compensation be?
    id = veracruz.7
    title = veracruz.7.t
    desc = veracruz.7.desc
    # picture = 

    is_triggered_only = yes
    fire_only_once = yes
    
    option = { #Give them guns
        name = veracruz.7.a
        ai_chance = {
            factor = 20
            modifier = {
                factor = 0
                has_country_flag = MVE_demanded_everything
            }
            modifier = {
                factor = 2
                has_country_flag = MVE_demanded_475
            }
        }
        custom_effect_tooltip = MVE_we_will_give_them_guns_upon_this_deals_completion_tt
        hidden_effect = {
            set_country_flag = MVE_gun_aid_deal
        }
    }
    option = { #Give them guns, train their troops, and give them volunteers
        name = veracruz.7.b
        ai_chance = {
            factor = 40
        }
        custom_effect_tooltip = MVE_we_will_give_them_guns_manpower_and_exp_upon_this_deals_completion_tt
        hidden_effect = {
            set_country_flag = MVE_gun_troops_aid_deal
        }
    }
    option = { #Join the War on Their Side!
        name = veracruz.7.c
        ai_chance = {
            factor = 40
            modifier = {
                factor = 2
                has_country_flag = MVE_demanded_everything
            }
            modifier = {
                add = -20
                has_country_flag = MVE_demanded_475
            }
        }
        custom_effect_tooltip = MVE_we_will_join_the_war_on_their_side_upon_this_deals_completion_tt
        hidden_effect = {
            set_country_flag = MVE_join_war_deal
        }
    }
}
country_event = { #The Finished Deal, Event for MAC
    id = veracruz.8
    title = veracruz.8.t
    desc = veracruz.8.desc
    # picture = 

    is_triggered_only = yes
    fire_only_once = yes

    option = { #Accept the Deal
        name = veracruz.8.a
        ai_chance = {
            factor = 80
            modifier = {
                add = 20
                MVE = {
                    has_country_flag = MVE_demanded_475
                }
            }
            modifier = {
                add = -40
                MVE = {
                    has_country_flag = MVE_demand_everything
                }
            }
            modifier = {
                add = 30
                MVE = {
                    has_country_flag = MVE_join_war_deal
                }
            }
            modifier = {
                add = -20
                MVE = {
                    has_country_flag = MVE_gun_aid_deal
                }
            }
        }
        if = {
            limit = {
                MVE = {
                    has_country_flag = MVE_demanded_475
                }
                custom_effect_tooltip = MVE_demanded_475_tt
            }
        } else if {
            limit = {
                MVE = {
                    has_country_flag = MVE_demanded_475_and_691
                }
                custom_effect_tooltip = MVE_demanded_475_and_691_tt
            }
        } else {
            custom_effect_tooltip = MVE_demand_everything_tt
        } 
        if = {
            limit = {
                MVE = {
                    has_country_flag = MVE_gun_aid_deal
                }
                custom_effect_tooltip = MVE_gun_aid_deal_tt
            }
        } else if = {
            limit = {
                MVE = {
                    has_country_flag = MVE_gun_troops_aid_deal
                }
                custom_effect_tooltip = MVE_gun_troops_aid_deal_tt
            }
        } else = {
            custom_effect_tooltip = MVE_join_war_deal_tt
        }
        hidden_effect = {
            MVE = {
                country_event = {
                    id = veracruz.9
                }
            }
        }
    }
    option = { #Modify the Deal
        name = veracruz.8.b
        trigger = {
            NOT = {
                MVE = {
                    has_country_flag = MVE_join_war_deal
                }
            }
        }
        ai_chance = {
            factor = 20
            modifier = {
                factor = 0
                MVE = {
                    has_country_flag = MVE_demanded_475
                }
            }
            modifier = {
                add = 40
                MVE = {
                    has_country_flag = MVE_demand_everything
                }
            }
            modifier = {
                add = 20
                MVE = {
                    has_country_flag = MVE_gun_aid_deal
                }
            }
        }
        custom_effect_tooltip = MVE_demand_them_to_join_the_war_tt
        hidden_effect = {
            MVE = {
                country_event = {
                    id = veracruz.10
                }
            }
        }
    }
    option = { #Reject the Deal
        name = veracruz.8.c
        ai_chance = {
            factor = 0
            modifier = {
                factor = 0
                MVE = {
                    has_country_flag = MVE_demanded_475
                }
            }
            modifier = {
                add = 40
                MVE = {
                    has_country_flag = MVE_demand_everything
                }
            }
            modifier = {
                add = -20
                MVE = {
                    has_country_flag = MVE_join_war_deal
                }
            }
            modifier = {
                add = 20
                MVE = {
                    has_country_flag = MVE_gun_aid_deal
                }
            }
        }
        hidden_effect = {
            MVE = {
                country_event = {
                    id = veracruz.11
                }
            }
        }
    }
}
country_event = { #MAC accepted the deal, effects go into place.
    id = veracruz.9
    title = veracruz.9.t
    desc = veracruz.9.desc
    # picture = 

    is_triggered_only = yes
    fire_only_once = yes

    option = { #Great!
        name = veracruz.2.a
    }
}
country_event = { #MAC askes for us to join the war
    id = veracruz.10
    title = veracruz.10.t
    desc = veracruz.10.desc
    # picture = 

    is_triggered_only = yes
    fire_only_once = yes

    option = { #We will join their war
        name = veracruz.10.a
        ai_chance = {
            factor = 60
        }
    }
    option = {
        name = veracruz.10.b
        ai_chance = {
            factor = 40
        }
    }
}