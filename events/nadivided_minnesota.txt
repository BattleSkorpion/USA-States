add_namespace = minnesota

country_event = { 
    id = minnesota.1
    title = minnesota.1.t
    desc = minnesota.1.d
    picture = GFX_report_event_generic_sign_treaty1

    fire_only_once = yes

	trigger = {
		tag = SMN
		date > 1936.8.22
	}

    immediate = {log = "[GetDateText]: [Root.GetName]: event minnesota.1"}

    option = {
        name = minnesota.1.a
        ai_chance = {
            factor = 100
        }
        promote_character = SMN_floyd_olson_cancer_now
    }
}
#country_event = { 
#    id = minnesota.2
#    title = minnesota.2.t
#    desc = minnesota.2.d
#    picture = GFX_gfx_event_pictures_redwinedeath
#
#    fire_only_once = no
#    is_triggered_only = yes
#
#    immediate = {log = "[GetDateText]: [Root.GetName]: event minnesota.2"}
#
#    option = {
#       name = minnesota.2.a
#       SMN = {
#        annex_country = {
#            target = ROOT
#        }
#       }
#    }
#    option = {
#        name = minnesota.2.b
#        SMN = {
#            create_wargoal = {
#                target = ROOT
#                type = annex_everything
#            }
#        }
#    }
#}
###THE OCONNOR AGREEMENT
country_event = { 
    id = minnesota.3
    title = minnesota.3.t
    desc = minnesota.3.d
    picture = GFX_worker_strike

    fire_only_once = yes

    #is_triggered_only = yes
    
    trigger = {
		focus_progress = {
			progress > 0.2
			focus = SMN_the_end_of_the_oconnor_agreement
		}
	}
    immediate = {log = "[GetDateText]: [Root.GetName]: event minnesota.3"}

    option = {
       name =  minnesota.3.a
       custom_effect_tooltip = SMN_end_the_oconnor_agreement
       add_political_power = 5
       #country_event = minnesota.4
       add_stability = 0.05
       swap_ideas = {
        remove_idea = SMN_corrupt_police
        add_idea = SMN_SPPD_idea
    }
       clr_country_flag = SMN_has_oconnor_agreement
    }
    ###THE PEOPLE ARE DISPLEASED
    option = {
        name = minnesota.3.b
        country_event = minnesota.4
        ###PEOPLE ARE DISPLEASED WITH HOW THE GOVERNEMNT HAS DEALT WITH THE CORRUPTION
    }
}
###PEOPLE READY TO STRIKE
country_event = { 
    id = minnesota.4
    title = minnesota.4.t
    desc = minnesota.4.d
    picture = GFX_worker_strike

    fire_only_once = yes
    is_triggered_only = yes

    immediate = {log = "[GetDateText]: [Root.GetName]: event minnesota.4"}

    option = {
       name =  minnesota.4.a
       hidden_effect = {
        remove_mission = SMN_1938_strikes
        clr_country_flag = SMN_incoming_strikes
       }
       activate_mission = SMN_1936_strikes
       set_country_flag = SMN_incoming_strikes_flag
       ###PEOPLE FLOCK TO THE STRIKES
    }
    ###THE PEOPLE ARE DISPLEASED
}
###THE RIOT BEGINS NORMAL
country_event = { 
    id = minnesota.5
    title = minnesota.5.t
    desc = minnesota.5.d
    picture = GFX_worker_strike

    fire_only_once = yes
    is_triggered_only = yes

    immediate = {log = "[GetDateText]: [Root.GetName]: event minnesota.5"}

    option = {
        name = minnesota.5.a
        834 = {
            damage_building = {
                type = industrial_complex
                damage = 3
            }
        }
        834 = {
            damage_building = {
                type = arms_factory
                damage = 3
            }
        }
        add_ideas = strikes_1
        add_stability = -0.10
        set_country_flag = SMN_teamsters_have_striked
    }
    ###THE PEOPLE ARE DISPLEASED
}
###ELECTIONS for democratic side
country_event = { 
    id = minnesota.6
    title = minnesota.6.t
    desc = minnesota.6.d
    picture = GFX_report_event_generic_sign_treaty1

    fire_only_once = yes
    is_triggered_only = yes
    
    mean_time_to_happen = {
        days = 7
    }
    immediate = {log = "[GetDateText]: [Root.GetName]: event minnesota.6"}

    option = {
        name = minnesota.6.a
        add_country_leader_role = {
			character = SMN_elmer_benson
			promote_leader = yes
			country_leader = {
				ideology = roosevelt_progressivism
				expire = "1965.1.1.1"
				traits = {
				}
			}
		}
    }
    ###HAROLD BENSON BECOMES PRESIDENT
    option = {
        name = minnesota.6.b
        set_politics = {
            ruling_party = democratic
        }
    }
}
# Event asking SWI/SUP for unification
country_event = {
	id = minnesota.7
	title = "Minnesota Proposes Unification"
	desc = "Minnesota proposes unification of the progressive alliance in these troubling times, should we accept and become apart of the union to deter the greater threats abroad, or shall we keep our indepdence, no matter the cost"
	picture = GFX_report_event_generic_sign_treaty1
    immediate = {log = "[GetDateText]: [Root.GetName]: event minnesota.7"}
	is_triggered_only = yes
	
	# Sounds good
	option = {
        ai_chance = {
            factor = 100
        }
		name = "Sounds Good"
		custom_effect_tooltip = GAME_OVER_TT
		FROM = {
			#country_event = { id = minnesota.8 }
			set_country_flag = SMN_progressive_unify_flag
            annex_country = {
			    target = ROOT
			    transfer_troops = yes
			}
		}
        ROOT = {
            every_unit_leader = {
                set_nationality = FROM
            }
        }
        every_state = {
            limit = {
                OR = {
                    is_core_of = ROOT
                }
            }
            add_core_of = FROM
        }
	}

	# We think not
	option = {
		name = "We Think Not"
		ai_chance = {
			factor = 0
		}
		FROM = { country_event = { id = minnesota.8 } }
	}
}

# Event for Netherlands informing BEL/LUX rejected
country_event = {
	id = minnesota.8
	title = "They Rejected our Proposal"
	desc = "They have rejected our proposal...it was worth a try"
	picture = GFX_report_event_generic_sign_treaty1
    immediate = {log = "[GetDateText]: [Root.GetName]: event minnesota.8"}

	is_triggered_only = yes
	
	# Unfortunate
	option = {
		name = "Unfortunate"
	}
}
###THE RIOT BEGINS
country_event = { 
    id = minnesota.9
    title = minnesota.5.t
    desc = minnesota.5.d
    picture = GFX_worker_strike

    fire_only_once = yes
    is_triggered_only = yes

    immediate = {log = "[GetDateText]: [Root.GetName]: event minnesota.9"}

    option = {
        name = minnesota.5.a
        834 = {
            damage_building = {
                type = industrial_complex
                damage = 3
            }
        }
        834 = {
            damage_building = {
                type = arms_factory
                damage = 3
            }
        }
        add_ideas = strikes_1
        add_stability = -0.10
        set_country_flag = SMN_teamsters_have_striked_big
        set_country_flag = SMN_teamsters_have_striked
        custom_effect_tooltip = ANTON_DIES_TT
        hidden_effect = {
            retire_character = SMN_anton_j_rockne
        }
    }
    ###THE PEOPLE ARE DISPLEASED
}
####OLSON DECLARES MARHSALL LAW
country_event = { 
    id = minnesota.10
    title = "Olson Declares Marshal Law"
    desc = "Olson has declared a state of emergency in the news of upcoming strikes, reports have come in that it may be worse than the 1934 trucker riots not only two years ago."
    picture = GFX_worker_strike

    trigger = {
        has_country_flag = {
            flag = SMN_incoming_strikes_flag
            days > 150
        }
    }
    fire_only_once = yes
    is_triggered_only = no

    immediate = { log = "[GetDateText]: [Root.GetName]: event minnesota.10" }

    option = {
        name = "It seems that the strikes from 1934 will happen all over again..."
        add_ideas = SMN_martial_law_idea
        add_days_mission_timeout = {
            mission = SMN_1938_strikes
            days = 50
        }
    }
    ###THE PEOPLE ARE DISPLEASED
}
# MINNESOTA SENDS ROOT to demand alignment
country_event = {
	id = minnesota.11
	title = "Minnesota Demands Our Alignment"
	desc = "The State of Minnesota has been influencing our politics, we knew this day would come, shall we become their puppet, align with them, or anger them?"
	picture = GFX_report_event_journalists_speech
	
	is_triggered_only = yes
	
	option = { #become their puppet
		name = "We Surrender"
		ai_chance = {
			factor = 25
		}
		FROM = { country_event = minnesota.12 }
	}

	option = { #change government to Romanian type, enter alliance
		name = "We shall align, but maintain our soverignty"
		ai_chance = {
			factor = 25
		}
		FROM = { country_event = minnesota.13 }
	}

	option = { #no deals
		name = DOD_romania.50.c
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				ROM = {
					is_in_faction = no
				}
			}
			modifier = {
				factor = 10
				is_in_faction = yes
			}
		}
		FROM = { country_event = minnesota.14 }	
	}
}
#Minnesota has FROM become their puppet
country_event = {
	id = minnesota.12
	title = "They Accepted!"
	desc = "They are now under our union. Welcome to the Commune"
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	option = { #cool
		name = "Cool"
		puppet = FROM
	}

}

#FROM OFFERS ALIGNMENT
country_event = {
	id = minnesota.13
	title = "They have aligned themselves to our politics"
	desc = "We have grown our union to further unite the midwest"
	picture = GFX_report_event_hungary_parliament
	
	is_triggered_only = yes

	option = { #cool
		name = "Awesome"
		ai_chance = {
			factor = 80
		}
		if = {
			limit = { is_faction_leader = yes }
			add_to_faction = FROM
		}
		if = {
			limit = {
				is_in_faction = no
			}
			set_rule = { can_create_factions = yes }
			create_faction = TROSKYIST_FACTION
			add_to_faction = FROM
		}
	}

	option = { #war
		name = "It seems we have no other choice but to liberate the workers"
		ai_chance = {
			factor = 20
		}
		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}
}

#HUN refuses
country_event = {
	id = minnesota.14
	title = "They have Refused alignment"
	desc = "How dare they refuse to unite!"
	picture = GFX_report_event_hungarian_soldiers
	
	is_triggered_only = yes

	option = { #cool
		name = "We cannot interfere"
		ai_chance = {
			factor = 10
			modifier = {
				strength_ratio = { tag = HUN ratio < 0.5 }
				factor = 7
			}
		}
	}

	option = { #war
		name = "Liberate the workers"
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}
}