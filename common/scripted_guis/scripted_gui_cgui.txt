scripted_gui = {
  culture_gui = {
    window_name = "culture_gui_window"
    context_type = selected_state_context
    parent_window_token = selected_state_view

    visible = {
		  always = yes
    }

    effects = {
      culture_list_button_click = {
        ROOT = {
          if = {
            limit = {
              has_country_flag = open_culture_list
            }
            clr_country_flag = open_culture_list
            else = {
              set_country_flag = open_culture_list
            }
          }
        }
      }
      core_button_click = {
        ROOT = {
          add_political_power = 400
        }
        set_variable = {
					var = var_core_time
					value = 2
				}
				set_state_flag = core_countdown
        if = {
          limit = {
            NOT = {
              check_variable = { national_culture_var = culture_var }
            }
          }
          add_to_variable = {
            var = var_core_time
            value = 1
          }
        }
        if = {
          limit = {
            NOT = {
              check_variable = { national_culture_group_var = culture_group_var }
            }
          }
          add_to_variable = {
            var = var_core_time
            value = 4
          }
        }
        if = {
          limit = {
            check_variable = { state_population_k > 100 }
          }
          add_to_variable = {
            var = var_core_time
            value = 1
          }
        }
        if = {
          limit = {
            check_variable = { state_population_k > 250 }
          }
          add_to_variable = {
            var = var_core_time
            value = 1
          }
        }
        if = {
          limit = {
            check_variable = { state_population_k > 500 }
          }
          add_to_variable = {
            var = var_core_time
            value = 1
          }
        }
        if = {
          limit = {
            check_variable = { state_population_k > 1000 }
          }
          add_to_variable = {
            var = var_core_time
            value = 1
          }
        }
        if = {
          limit = {
            check_variable = { state_population_k > 5000 }
          }
          add_to_variable = {
            var = var_core_time
            value = 2
          }
        }
        if = {
          limit = {
            check_variable = { state_population_k > 10000 }
          }
          add_to_variable = {
            var = var_core_time
            value = 2
          }
        } 
      }
      set_capital_button_click = {
        ROOT = {
          set_capital = {
            state = PREV
          }
          add_political_power = -300
          add_timed_idea = {
            idea = capital_recently_moved
            days = 200
          }
        }
      }
      recruitment_button_click = {
        PREV = {
          add_dynamic_modifier = {
            modifier = cgui_recruitment_campaign
            days = 180
          }
        }
        ROOT = {
          add_political_power = -80
          add_command_power = -20
        }
      }
      boost_construction_button_click = {
        PREV = {
          add_dynamic_modifier = {
            modifier = cgui_construction_boom
            days = 150
          }
        }
        ROOT = {
          add_timed_idea = {
            idea = funding_construction_program
            days = 150
          }
          add_political_power = 400
        }
      }
      increase_immigration_button_click = {
        PREV = {
          add_dynamic_modifier = {
            modifier = cgui_curfews
            days = 100
          }
        }
        ROOT = {
          add_stability = -0.02
          add_political_power = -50
        }
      }
      support_resistance_button_click = {
        PREV = {
          add_dynamic_modifier = {
            modifier = cgui_resistance_supported
            days = 100
          }
        }
        ROOT = {
          add_command_power = -20
          add_equipment_to_stockpile = {
            type = infantry_equipment
            amount = 4000
          }
        }
      }
      suppress_resistance_button_click = {
        PREV = {
          add_dynamic_modifier = {
            modifier = cgui_resistance_suppressed
            days = 100
          }
        }
        ROOT = {
          add_political_power = -40
          add_equipment_to_stockpile = {
            type = infantry_equipment
            amount = -500
          }
        }
      }
      compliance_button_click = {
        PREV = {
          add_dynamic_modifier = {
            modifier = cgui_work_with_collab
            days = 100
          }
        }
        ROOT = {
          add_political_power = 400
        }
      }
    }

    triggers = {

      ### CORING BUTTON

      Background_2_visible = {
        PREV = {
          NOT = {
            is_core_of = ROOT
          }
          is_controlled_by = ROOT
        }
      }

      core_button_visible = {
        PREV = {
          NOT = {
            has_state_flag = core_countdown
          }
          NOT = {
            is_core_of = ROOT
          }
          is_controlled_by = ROOT
          compliance > 45
          resistance < 15
        }
        ROOT = {
          has_political_power > 99
        }
      }

      core_title_visible = {
        PREV = {
          NOT = {
            has_state_flag = core_countdown
          }
          NOT = {
            is_core_of = ROOT
          }
          is_controlled_by = ROOT
          compliance > 45
          resistance < 15
        }
      }

      core_icon_visible = {
        OR = {
          ROOT = {
            has_political_power < 100
          }
          PREV = {
            OR = {
              compliance < 45
              resistance > 15
            }
          }
        }
        NOT = {
          is_core_of = ROOT
        }
        is_controlled_by = ROOT
      }

      core_days_visible = {
        PREV = {
          has_state_flag = core_countdown
        }
      }

      #### CAPITAL

      set_capital_button_visible = {
        PREV = {
          is_core_of = ROOT
          is_controlled_by = ROOT
          is_capital = no
        }
        ROOT = {
          has_political_power > 299
          NOT = {
            has_idea = capital_recently_moved
          }
        }
      }
      set_capital_icon_visible = {
        OR = {
          PREV = {
            OR = {
              is_capital = yes
              NOT = {
                is_controlled_by = ROOT
              }
              NOT = {
                is_core_of = ROOT
              }
            }
          }
          ROOT = {
            OR = {
              has_political_power < 300
              has_idea = capital_recently_moved
            }
          }
        }
      }

      #### BOOST/CRUSH RESISTANCE

      support_resistance_button_visible = {
        PREV = {
          NOT = {
            has_dynamic_modifier = {
              modifier = cgui_resistance_supported
            }
          }
          OR = {
            is_core_of = ROOT
            controller = {
              has_war_with = ROOT
            }
          }
          NOT = {
            OR = {
              is_controlled_by = ROOT
              controller = {
                is_ally_with = ROOT
              }
            }
            is_core_of = controller
          }
        }
        ROOT = {
          has_equipment = {
            infantry_equipment > 999
          }
          command_power > 19
        }
        NOT = {
          is_controlled_by = ROOT
        }
      }
      support_resistance_icon_visible = {
        OR = {
          ROOT = {
            OR = {
              has_equipment = {
                infantry_equipment < 100
              }
              command_power < 20
            }
          }
          PREV = {
            OR = {
              has_dynamic_modifier = {
                modifier = cgui_resistance_supported
              }
              NOT = {
                is_core_of = ROOT
                controller = {
                  has_war_with = ROOT
                }
              }
              controller = {
                is_ally_with = ROOT
              }
              is_core_of = controller
            }
          }
        }
        NOT = {
          is_controlled_by = ROOT
        }
      }

      suppress_resistance_button_visible = {
        PREV = {
          NOT = {
            has_dynamic_modifier = {
              modifier = cgui_resistance_suppressed
            }
            is_core_of = ROOT
          }
        }
        ROOT = {
          has_equipment = {
            infantry_equipment > 499
          }
          has_political_power > 39
        }
        is_controlled_by = ROOT
      }

      suppress_resistance_icon_visible = {
        OR = {
          PREV = {
            OR = {
              has_dynamic_modifier = {
                modifier = cgui_resistance_suppressed
              }
              is_core_of = ROOT
            }
          }
          ROOT = {
            OR = {
              has_equipment = {
                infantry_equipment < 500
              }
              has_political_power < 40
            }
          }
        }
        is_controlled_by = ROOT
      }

      #### BOOST COMPLIANCE

      compliance_button_visible = {
        PREV = {
          NOT = {
            is_core_of = ROOT
            has_dynamic_modifier = {
              modifier = cgui_work_with_collab
            }
          }
          is_controlled_by = ROOT
        }
        ROOT = {
          has_political_power > 99
        }
      }

      compliance_icon_visible = {
        OR = {
          PREV = {
            OR = {
              is_core_of = ROOT
              NOT = {
                is_controlled_by = ROOT
              }
              has_dynamic_modifier = {
                modifier = cgui_work_with_collab
              }
            }
          }
          ROOT = {
            has_political_power < 100
          }
        }
      }

      #### IMMIGRATION

      increase_immigration_button_visible = {
        PREV = {
          is_controlled_by = ROOT
          NOT = {
            has_dynamic_modifier = {
              modifier = cgui_curfews
            }
          }
        }
        ROOT = {
          has_political_power > 49
        }
      }

      increase_immigration_icon_visible = {
        OR = {
          PREV = {
            OR = {
              NOT = {
                is_controlled_by = ROOT
              }
              has_dynamic_modifier = {
                modifier = cgui_curfews
              }
            }
          }
          ROOT = {
            has_political_power < 50
          }
        }
      }

      #### BOOST CONSTRUCTION

      boost_construction_button_visible = {
        PREV = {
          is_controlled_by = ROOT
        }
        ROOT = {
          has_political_power > 99
          NOT = {
            has_idea = funding_construction_program
          }
        }
      }

      boost_construction_icon_visible = {
        OR = {
          ROOT = {
            OR = {
              has_political_power < 100
              has_idea = funding_construction_program
            }
          }
          PREV = {
            NOT = {
              is_controlled_by = ROOT
            }
          }
        }
      }

      #### RECRUITMENT CAMPAIGN

      recruitment_button_visible = {
        PREV = {
          is_controlled_by = ROOT
          NOT = {
            has_dynamic_modifier = {
              modifier = cgui_recruitment_campaign
            }
          }
        }
        ROOT = { 
          has_political_power > 79
          command_power > 19
        }
      }

      recruitment_icon_visible = {
        OR = {
          ROOT = {
            OR = {
              has_political_power < 80
              command_power < 20
            }
          }
          PREV = {
            OR = {
              NOT = {
                is_controlled_by = ROOT
              }
              has_dynamic_modifier = {
                modifier = cgui_recruitment_campaign
              }
            }
          }
        }
      }


      ########################################################


      culture_bozo_modz_visible = {
        check_variable = { culture_var = 4 }
      }
      culture_greek_visible = {
        check_variable = { culture_var = 1 }
      }
      culture_turkish_visible = {
        check_variable = { culture_var = 2 }
      }
      culture_quebecois_visible = {
        check_variable = { culture_var = 3 }
      }
    }

    dynamic_lists = {
	  }

    properties = {
    }

    ai_enabled = {
		  always = no
    }

    ai_test_interval = 290  # The higher, the long it takes the ai to do actions
	  ai_test_variance = 0.5

    ai_check = {
    }

    ai_check_scope = {
    }

    ai_weights = {
    }
  }
}
